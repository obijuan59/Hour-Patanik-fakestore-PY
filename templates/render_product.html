{% extends "master.html" %}

{% block main_content %}
{% if error %}
<div class="text-center my-3">
    <h3 class="text-danger">{{ error }}</h3>
</div>
{% endif %}

<div class="row g-3">
    {% for item in products %}
    <div class="col-lg-3 col-md-4 col-sm-12">
        <div class="product-card shadow-sm rounded-3 p-2 h-100 d-flex flex-column">

            <!-- Category Badge -->
            <span class="badge badge-pill text-white pro-cat position-absolute m-2 bg-gradient-purple">
                {{ item.category }}
            </span>

            <!-- Product Image -->
            <div class="text-center">
                <img
                    src="{{ item['image'] }}"
                    alt="{{ item['title'] }}"
                    class="img-fluid"
                    style="height: 200px; object-fit: contain; border-radius: 6px;"
                />
            </div>

            <!-- Product Info -->
            <div class="product-card-body mt-2 flex-grow-1 d-flex flex-column justify-content-between">
                <div>
                    <div class="product-card-title fw-bold text-gradient-purple">{{ item['title'] }}</div>
                    <div class="product-card-description text-muted" style="margin-bottom: -5px;">
                        {{ item['description'] }}
                    </div>
                    <a href="/detail/{{ item['id'] }}"
                       class="text-decoration-underline text-gradient-purple"
                       style="cursor: pointer;">
                        See more
                    </a>
                </div>

                <!-- Price & Button -->
                <div class="mt-3">
                    <span class="product-card-price text-gradient-purple fw-bold">${{ item['price'] }}</span>
                    <button @click="addToCart({{ item }})" class="btn btn-sm btn-gradient-purple mt-2 w-100">
                        Add to Cart ðŸ›’
                    </button>
                </div>
            </div>

        </div>
    </div>
    {% endfor %}
</div>

<style>
/* Gradient buttons & badges */
.btn-gradient-purple {
    background: linear-gradient(135deg, #6A1B9A, #8E24AA);
    color: #fff;
    font-weight: 600;
    transition: all 0.3s;
}
.btn-gradient-purple:hover {
    background: linear-gradient(135deg, #8E24AA, #6A1B9A);
}
.bg-gradient-purple {
    background: linear-gradient(135deg, #6A1B9A, #8E24AA);
}

/* Gradient text */
.text-gradient-purple {
    background: linear-gradient(135deg, #6A1B9A, #8E24AA);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* Card hover effect */
.product-card:hover {
    box-shadow: 0 0.5rem 1rem rgba(138, 43, 226, 0.2);
    transform: translateY(-2px);
    transition: all 0.3s;
}

/* Badge styling */
.pro-cat {
    font-weight: 600;
    padding: 0.25em 0.6em;
    font-size: 0.8rem;
    text-transform: uppercase;
}

/* Price styling */
.product-card-price {
    font-size: 1.1rem;
}

/* Button hover shadow */
.btn-gradient-purple:hover {
    box-shadow: 0 0.25rem 0.5rem rgba(138, 43, 226, 0.4);
}
</style>
{% endblock %}
